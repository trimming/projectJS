(()=>{"use strict";new Vue({el:"#app",data:()=>({goods:[],filteredGoods:[],isVisibleCart:!1,cart:[],message:!1,stat:[]}),methods:{makeGETRequest(t){fetch(t).then((t=>t.json())).then((e=>{"/catalogData"===t?(this.goods=e,this.filteredGoods=e):"/stats"===t?this.stat=e:this.cart=e})).catch((t=>{this.message=!this.message,console.log("ошибка")}))},filterGoods(t){let e=new RegExp(t,"i");this.filteredGoods=this.goods.filter((t=>e.test(t.product_name)))},visibleCart(){this.isVisibleCart=!this.isVisibleCart},addToCart(t){this.goods.forEach((e=>{e.id_product===t&&(this.cart.push(e),e.operation="add",fetch("/addToCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch("/stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}))},removeFromCart(t){this.cart.forEach((e=>{e.id_product===t&&(e.operation="remove",fetch("/removeFromCart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),fetch("/stats",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))})),this.cart=this.cart.filter((e=>e.id_product!==t))}},mounted(){this.makeGETRequest("/catalogData"),this.makeGETRequest("/addToCart"),this.makeGETRequest("/removeFromCart"),this.makeGETRequest("/stats")}})})();